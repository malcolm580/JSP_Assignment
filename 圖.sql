CREATE TABLE `User` (UserID int(10) NOT NULL AUTO_INCREMENT, Username varchar(255) NOT NULL UNIQUE, Password varchar(255) NOT NULL, Role varchar(255) NOT NULL, Email varchar(255), PRIMARY KEY (UserID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE Module (ModuleID int(10) NOT NULL AUTO_INCREMENT, ModuleName varchar(255) NOT NULL, PRIMARY KEY (ModuleID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE Metrial (ModuleID int(10) NOT NULL, ContentType varchar(255) NOT NULL, Content varchar(255), PRIMARY KEY (ModuleID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE Quiz (QuizID int(10) NOT NULL AUTO_INCREMENT, ModuleID int(10) NOT NULL, TimeLimit int(10), QuizName varchar(255) NOT NULL, PRIMARY KEY (QuizID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE Question (QuizID int(10) NOT NULL, QuestionID int(10) NOT NULL AUTO_INCREMENT, QuestionType varchar(255) NOT NULL, Question varchar(255) NOT NULL, CorrectAnswer varchar(255), Options_JSON varchar(255), PRIMARY KEY (QuestionID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE QuizResult (UserID int(10), CourseID int(10), QuizID int(10) NOT NULL, QuizResultID int(10) NOT NULL AUTO_INCREMENT, Duration int(10), AnsweringQuestionState_JSON int(10), PRIMARY KEY (QuizResultID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE UserModule (UserID int(10) NOT NULL UNIQUE, ModuleID int(10) NOT NULL UNIQUE, PRIMARY KEY (UserID, ModuleID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE UserQuiz (UserUserID int(10) NOT NULL, QuizQuizID int(10) NOT NULL, PRIMARY KEY (UserUserID, QuizQuizID)) ENGINE=InnoDB CHARACTER SET UTF8;
CREATE TABLE MetrialUser (MetrialModuleID int(10) NOT NULL, UserUserID int(10) NOT NULL, isBlackListed char(1), PRIMARY KEY (MetrialModuleID, UserUserID)) ENGINE=InnoDB CHARACTER SET UTF8;
ALTER TABLE Metrial ADD INDEX FKMetrial663747 (ModuleID), ADD CONSTRAINT FKMetrial663747 FOREIGN KEY (ModuleID) REFERENCES Module (ModuleID);
ALTER TABLE Quiz ADD INDEX FKQuiz354528 (ModuleID), ADD CONSTRAINT FKQuiz354528 FOREIGN KEY (ModuleID) REFERENCES Module (ModuleID);
ALTER TABLE Question ADD INDEX FKQuestion143290 (QuizID), ADD CONSTRAINT FKQuestion143290 FOREIGN KEY (QuizID) REFERENCES Quiz (QuizID);
ALTER TABLE QuizResult ADD INDEX FKQuizResult219291 (QuizID), ADD CONSTRAINT FKQuizResult219291 FOREIGN KEY (QuizID) REFERENCES Quiz (QuizID);
ALTER TABLE UserModule ADD INDEX FKUserModule886446 (UserID), ADD CONSTRAINT FKUserModule886446 FOREIGN KEY (UserID) REFERENCES `User` (UserID);
ALTER TABLE UserModule ADD INDEX FKUserModule652649 (ModuleID), ADD CONSTRAINT FKUserModule652649 FOREIGN KEY (ModuleID) REFERENCES Module (ModuleID);
ALTER TABLE UserQuiz ADD INDEX FKUserQuiz118044 (UserUserID), ADD CONSTRAINT FKUserQuiz118044 FOREIGN KEY (UserUserID) REFERENCES `User` (UserID);
ALTER TABLE UserQuiz ADD INDEX FKUserQuiz572359 (QuizQuizID), ADD CONSTRAINT FKUserQuiz572359 FOREIGN KEY (QuizQuizID) REFERENCES Quiz (QuizID);
ALTER TABLE MetrialUser ADD INDEX FKMetrialUse790696 (MetrialModuleID), ADD CONSTRAINT FKMetrialUse790696 FOREIGN KEY (MetrialModuleID) REFERENCES Metrial (ModuleID);
ALTER TABLE MetrialUser ADD INDEX FKMetrialUse318555 (UserUserID), ADD CONSTRAINT FKMetrialUse318555 FOREIGN KEY (UserUserID) REFERENCES `User` (UserID);
